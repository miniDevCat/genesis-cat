# Genesis Web UI 使用说明

## 项目简介

这是一个基于 **Ant Design Pro** 的现代化文生图工具，使用 Genesis 作为底层 AI 引擎。


### 方式：手动启动

#### 1. 安装前端依赖

```bash
cd genesis-web-ui
npm install
```

如果 npm 安装速度慢，可以使用国内镜像：

```bash
npm config set registry https://registry.npmmirror.com
npm install
```

或使用 pnpm（更快）：

```bash
npm install -g pnpm
pnpm install
```

#### 2. 启动后端服务

打开新的命令行窗口：

```bash
cd Genesis-main
python api/advanced_server.py
```

后端服务将运行在 `http://localhost:5000`

#### 3. 启动前端服务

在另一个命令行窗口：

```bash
cd genesis-web-ui
npm run dev
```

前端服务将运行在 `http://localhost:8000`

浏览器会自动打开，如果没有，请手动访问 http://localhost:8000

## 功能说明

### 1. 文生图页面

- **正向提示词**：描述你想要生成的图像内容
- **负向提示词**：描述你不想要的内容（可选）
- **尺寸设置**：支持多种预设尺寸，也可以自定义
- **采样步数**：控制生成质量，步数越多质量越好但速度越慢（推荐 20-30）
- **CFG Scale**：控制提示词的影响力（推荐 7-9）
- **种子**：固定种子可以重现相同的图像，-1 表示随机
- **采样器**：不同的采样算法，Euler 是最常用的

### 2. 历史记录页面

查看所有生成的图像，包括：
- 生成的图像预览
- 使用的提示词
- 生成参数
- 生成时间

### 3. 设置页面

查看系统信息：
- 当前使用的设备（CPU/GPU）
- GPU 型号（如果有）
- API 服务地址

## 使用技巧

### 提示词编写建议

**好的提示词示例：**
```
a beautiful landscape with mountains and lake, sunset, golden hour, 
highly detailed, 4k, photorealistic, professional photography
```

**提示词结构：**
1. 主体描述（what）
2. 风格描述（style）
3. 质量词（quality）
4. 技术词（technical）

**常用质量词：**
- `highly detailed` - 高度细节
- `4k`, `8k` - 高分辨率
- `photorealistic` - 照片级真实
- `masterpiece` - 杰作
- `best quality` - 最佳质量

**常用负向提示词：**
```
ugly, blurry, low quality, distorted, bad anatomy, 
deformed, disfigured, watermark, text
```

### 参数调整建议

**快速预览：**
- 尺寸：512×512
- 步数：15-20
- CFG：7

**高质量生成：**
- 尺寸：768×768 或更大
- 步数：25-40
- CFG：7-9

**创意探索：**
- 使用随机种子（-1）
- 尝试不同采样器
- 调整 CFG 值

## 常见问题

### Q: 前端无法连接后端？

**A:** 检查以下几点：
1. 后端服务是否正常运行（访问 http://localhost:5000/health）
2. 端口 5000 是否被占用
3. 防火墙是否阻止了连接

### Q: 生成速度很慢？

**A:** 可能的原因：
1. 使用 CPU 而非 GPU（查看设置页面）
2. 步数设置过高
3. 图像尺寸过大
4. 模型未加载到 GPU

### Q: 生成的图像质量不好？

**A:** 尝试：
1. 增加采样步数（25-40）
2. 优化提示词描述
3. 添加质量相关的关键词
4. 调整 CFG Scale

### Q: 出现错误提示？

**A:** 查看：
1. 浏览器控制台的错误信息
2. 后端命令行的日志输出
3. 确保 Python 环境正确安装所有依赖

## 技术栈

### 前端
- **React 18** - UI 框架
- **TypeScript** - 类型安全
- **Ant Design 5** - UI 组件库
- **Ant Design Pro** - 企业级 UI 解决方案
- **Vite** - 构建工具
- **Zustand** - 状态管理
- **Axios** - HTTP 客户端

### 后端
- **Genesis Engine** - AI 图像生成引擎
- **Flask** - Web 框架
- **Flask-SocketIO** - WebSocket 支持

## 开发说明

### 目录结构

```
genesis-web-ui/
├── src/
│   ├── layouts/          # 布局组件
│   │   └── BasicLayout.tsx
│   ├── pages/            # 页面组件
│   │   ├── TextToImage/  # 文生图页面
│   │   ├── TaskHistory/  # 历史记录
│   │   └── Settings/     # 设置
│   ├── services/         # API 服务
│   │   └── api.ts
│   ├── store/            # 状态管理
│   │   └── useGenerationStore.ts
│   ├── App.tsx           # 应用根组件
│   ├── main.tsx          # 入口文件
│   └── index.css         # 全局样式
├── package.json          # 依赖配置
├── vite.config.ts        # Vite 配置
└── tsconfig.json         # TypeScript 配置
```

### 构建生产版本

```bash
npm run build
```

构建产物在 `dist` 目录。

### 部署

构建完成后，可以使用任何静态文件服务器部署 `dist` 目录，例如：

```bash
# 使用 serve
npm install -g serve
serve -s dist -p 8000

# 或使用 nginx
# 将 dist 目录内容复制到 nginx 的 html 目录
```

## 更新日志

### v1.0.0 (2024-11-13)

- ✨ 初始版本发布
- 🎨 文生图功能
- 📜 历史记录查看
- ⚙️ 系统设置
- 🚀 基于 Ant Design Pro 的现代化 UI

## 许可证

MIT License

## 支持

如有问题，请查看：
1. README.md
2. Genesis 引擎文档
3. Ant Design Pro 官方文档
